<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ali Hussien</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'VT323', monospace;
            background-color: #000;
            color: #0f0;
            overflow: hidden;
        }
        #game-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        #header {
            text-align: center;
            padding: 10px;
            background-color: #001100;
            border-bottom: 2px solid #0f0;
        }
        #main-area {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        #game-map {
            flex: 1;
            padding: 20px;
            font-size: 16px;
            line-height: 1;
            white-space: pre;
            overflow: auto;
        }
        #content {
            flex: 2;
            padding: 20px;
            overflow-y: auto;
            border-left: 2px solid #0f0;
        }
        #status-bar {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background-color: #001100;
            border-top: 2px solid #0f0;
        }
        .hidden {
            display: none;
        }
        #inventory {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #001100;
            border: 2px solid #0f0;
            padding: 20px;
            z-index: 100;
        }
        .item {
            cursor: pointer;
            padding: 5px;
            margin: 5px 0;
            border: 1px solid #0f0;
        }
        .item:hover {
            background-color: #003300;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        .entity {
            animation: pulse 1s infinite;
        }
        #dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #001100;
            border: 2px solid #0f0;
            padding: 20px;
            z-index: 101;
            max-width: 80%;
            text-align: center;
        }
        button {
            background-color: #003300;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 5px 10px;
            margin: 5px;
            cursor: pointer;
            font-family: 'VT323', monospace;
            font-size: 16px;
        }
        button:hover {
            background-color: #004400;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="header">
            <h1>Ali Hussein</h1>
            <h5>AI research + General Chaos</h5>
        </div>
        <div id="main-area">
            <div id="game-map"></div>
            <div id="content"></div>
        </div>
        <div id="status-bar">
            <div id="health"></div>
            <div id="xp"></div>
            <div id="level"></div>
            <div id="keys"></div>
        </div>
    </div>
    <div id="inventory" class="hidden"></div>
    <div id="dialog" class="hidden"></div>

    <script>
        const mapLayout = [
            "+-----------------+----------+--------+",
            "|  H    R    P    |          |        |",
            "|        ?        |    ?     |   B    |",
            "|                 +    D     |        |",
            "|        @        |          |   $    |",
            "|        ?        |    ?     |        |",
            "|  C    E    L    |          |   T    |",
            "+-----------------+----------+--------+"
        ];

        let map = JSON.parse(JSON.stringify(mapLayout));

        const playerChar = '@';
        let playerX = 9;
        let playerY = 4;
        let playerHealth = 100;
        let playerXP = 0;
        let playerLevel = 1;
        let inventory = [];
        let keys = 0;

        const dragonChar = 'D';
        let dragonHealth = 100;
        const dragonX = 22;
        const dragonY = 3;

        const sections = {
            'H': { name: 'Home', content: 'Welcome to Dr. Pixel\'s Research Realm! Explore the map to learn about my work and face challenges.' },
            'R': { name: 'Research', content: 'My current research focuses on the intersection of quantum computing and artificial intelligence.' },
            'P': { name: 'Publications', content: 'Check out my latest publications in top-tier journals and conferences.' },
            'C': { name: 'Contact', content: 'You can reach me at drpixel@quantumai.edu' },
            'E': { name: 'Education', content: 'Ph.D. in Quantum Information Science from Pixel University' },
            'L': { name: 'Lab', content: 'This is where the magic happens! My quantum computer setup and AI models are housed here.' },
            'B': { name: 'Boss Room', content: 'You\'ve entered the domain of the Research Review Committee. Prepare to defend your thesis!' },
            'D': { name: 'Dragon\'s Den', content: 'A fearsome dragon guards ancient knowledge. Defeat it to gain insights!' },
            'T': { name: 'Time Machine', content: 'A mysterious device that seems to bend the fabric of spacetime. Use with caution!' },
            '$': { name: 'Grant Funding', content: 'You\'ve discovered a cache of research funding! Your XP increases significantly.' }
        };

        const entities = {
            '?': { name: 'Mystery Box', action: openMysteryBox },
            '$': { name: 'Grant Funding', action: collectFunding },
            'K': { name: 'Key', action: collectKey }
        };

        function drawMap() {
            const gameMap = document.getElementById('game-map');
            gameMap.innerHTML = map.join('\n')
                .replace(/@/g, '<span class="entity">@</span>')
                .replace(/D/g, '<span class="entity">D</span>')
                .replace(/\?/g, '<span class="entity">?</span>')
                .replace(/\$/g, '<span class="entity">$</span>')
                .replace(/K/g, '<span class="entity" style="color: #ffff00;">K</span>')
                .replace(/\+/g, '<span style="color: #ff0;">+</span>');
        }

        function openMysteryBox() {
            const items = ['Health Potion', 'XP Boost', 'Shield', 'Quantum Analyzer'];
            const item = items[Math.floor(Math.random() * items.length)];
            inventory.push(item);
            displayDialog(`You found a ${item}!`, "Add to Inventory", () => {
                hideDialog();
                displayContent({ name: 'Inventory', content: `You added ${item} to your inventory.` });
            });
            mapLayout[playerY] = mapLayout[playerY].substring(0, playerX) + ' ' + mapLayout[playerY].substring(playerX + 1);
        }

        function collectKey() {
            keys++;
            displayDialog("You found a key!", "Add to Inventory", () => {
                hideDialog();
                displayContent({ name: 'Inventory', content: "You added a key to your inventory." });
            });
            mapLayout[playerY] = mapLayout[playerY].substring(0, playerX) + ' ' + mapLayout[playerY].substring(playerX + 1);
        }
        
        function updatePositions() {
            map = JSON.parse(JSON.stringify(mapLayout));
            map[playerY] = map[playerY].substring(0, playerX) + playerChar + map[playerY].substring(playerX + 1);
            if (dragonHealth > 0) {
                map[dragonY] = map[dragonY].substring(0, dragonX) + dragonChar + map[dragonY].substring(dragonX + 1);
            }
            drawMap();
            updateStatusBar();
        }

        function movePlayer(dx, dy) {
            const newX = playerX + dx;
            const newY = playerY + dy;
            const targetChar = map[newY][newX];
            
            if (targetChar === '+') {
                if (keys > 0) {
                    keys--;
                    mapLayout[newY] = mapLayout[newY].substring(0, newX) + ' ' + mapLayout[newY].substring(newX + 1);
                    displayDialog("You've unlocked a door!", "Continue", hideDialog);
                } else {
                    displayDialog("This door is locked. You need a key to open it.", "OK", hideDialog);
                    return;
                }
            }
            
            if (newX > 0 && newX < map[0].length - 1 && newY > 0 && newY < map.length - 1 && targetChar !== '|' && targetChar !== '-') {
                playerX = newX;
                playerY = newY;
                updatePositions();
                checkSection();
                checkEntity();
            }
        }

        function attackDragon() {
            if (Math.abs(playerX - dragonX) <= 1 && Math.abs(playerY - dragonY) <= 1) {
                const damage = Math.floor(Math.random() * 20) + 10;
                dragonHealth -= damage;
                displayContent({ name: 'Combat', content: `You attack the dragon for ${damage} damage! Dragon health: ${dragonHealth}` });
                if (dragonHealth <= 0) {
                    displayContent({ name: 'Victory', content: 'You have defeated the dragon! You gain valuable research insights and 100 XP.' });
                    gainXP(100);
                    return;
                }
                dragonAttack();
            } else {
                displayContent({ name: 'Miss', content: 'You swing at the air. The dragon is not close enough.' });
            }
        }

        function dragonAttack() {
            if (Math.abs(playerX - dragonX) <= 2 && Math.abs(playerY - dragonY) <= 2) {
                const damage = Math.floor(Math.random() * 15) + 5;
                playerHealth -= damage;
                displayContent({ name: 'Dragon Attack', content: `The dragon breathes fire for ${damage} damage! Your health: ${playerHealth}` });
                if (playerHealth <= 0) {
                    gameOver('The dragon has defeated you. Your research has been lost to the ages.');
                }
            }
        }

        function checkSection() {
            const currentChar = mapLayout[playerY][playerX];
            if (sections[currentChar]) {
                displayContent(sections[currentChar]);
            }
        }

        function checkEntity() {
            const currentChar = mapLayout[playerY][playerX];
            if (entities[currentChar]) {
                entities[currentChar].action();
            }
        }

        function openMysteryBox() {
            const items = ['Health Potion', 'XP Boost', 'Shield', 'Quantum Analyzer', 'Key'];
            const item = items[Math.floor(Math.random() * items.length)];
            if (item === 'Key') {
                keys++;
                displayDialog("You found a key!", "Add to Inventory", () => {
                    hideDialog();
                    displayContent({ name: 'Inventory', content: "You added a key to your inventory." });
                });
            } else {
                inventory.push(item);
                displayDialog(`You found a ${item}!`, "Add to Inventory", () => {
                    hideDialog();
                    displayContent({ name: 'Inventory', content: `You added ${item} to your inventory.` });
                });
            }
            mapLayout[playerY] = mapLayout[playerY].substring(0, playerX) + ' ' + mapLayout[playerY].substring(playerX + 1);
        }

        function collectFunding() {
            const funding = Math.floor(Math.random() * 50) + 50;
            gainXP(funding);
            displayDialog(`You've secured $${funding}K in grant funding!`, 'Accept Funding', () => {
                hideDialog();
                displayContent({ name: 'Funding Secured', content: `You gained ${funding} XP from your new grant.` });
            });
            mapLayout[playerY] = mapLayout[playerY].substring(0, playerX) + ' ' + mapLayout[playerY].substring(playerX + 1);
        }

        function displayContent(section) {
            const content = document.getElementById('content');
            content.innerHTML = `<h2>${section.name}</h2><p>${section.content}</p>`;
        }

        function updateStatusBar() {
            document.getElementById('health').textContent = `Health: ${playerHealth}`;
            document.getElementById('xp').textContent = `XP: ${playerXP}`;
            document.getElementById('level').textContent = `Level: ${playerLevel}`;
            document.getElementById('keys').textContent = `Keys: ${keys}`;
        }

        function gainXP(amount) {
            playerXP += amount;
            if (playerXP >= playerLevel * 100) {
                playerLevel++;
                playerHealth = Math.min(playerHealth + 20, 100);
                displayDialog(`Level Up! You are now level ${playerLevel}. Health restored by 20.`, 'Continue', hideDialog);
            }
            updateStatusBar();
        }

        function showInventory() {
            const inventoryDiv = document.getElementById('inventory');
            inventoryDiv.innerHTML = '<h2>Inventory</h2>';
            inventory.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'item';
                itemDiv.textContent = item;
                itemDiv.onclick = () => useItem(item);
                inventoryDiv.appendChild(itemDiv);
            });
            inventoryDiv.classList.remove('hidden');
        }

        function hideInventory() {
            document.getElementById('inventory').classList.add('hidden');
        }

        function useItem(item) {
            switch(item) {
                case 'Health Potion':
                    playerHealth = Math.min(playerHealth + 30, 100);
                    displayContent({ name: 'Item Used', content: 'You used a Health Potion. +30 Health!' });
                    break;
                case 'XP Boost':
                    gainXP(50);
                    displayContent({ name: 'Item Used', content: 'You used an XP Boost. +50 XP!' });
                    break;
                case 'Shield':
                    playerHealth += 20;
                    displayContent({ name: 'Item Used', content: 'You equipped a Shield. +20 Max Health!' });
                    break;
                case 'Quantum Analyzer':
                    displayContent({ name: 'Item Used', content: 'You used the Quantum Analyzer. It reveals hidden quantum fluctuations in the environment, but you\'re not sure how to interpret the results yet.' });
                    break;
            }
            inventory = inventory.filter(i => i !== item);
            hideInventory();
            updateStatusBar();
        }

        function displayDialog(message, buttonText, buttonAction) {
            const dialog = document.getElementById('dialog');
            dialog.innerHTML = `
                <p>${message}</p>
                <button onclick="buttonAction()">${buttonText}</button>
            `;
            dialog.classList.remove('hidden');
            window.buttonAction = buttonAction;
        }

        function hideDialog() {
            document.getElementById('dialog').classList.add('hidden');
        }

        function gameOver(message) {
            displayDialog(message, 'Restart', () => {
                location.reload();
            });
        }

        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp': movePlayer(0, -1); break;
                case 'ArrowDown': movePlayer(0, 1); break;
                case 'ArrowLeft': movePlayer(-1, 0); break;
                case 'ArrowRight': movePlayer(1, 0); break;
                case ' ': attackDragon(); break;
                case 'i': showInventory(); break;
                case 'Escape': hideInventory(); break;
            }
        });

        function initGame() {
            updatePositions();
            drawMap();
            updateStatusBar();
            displayContent(sections['H']);
            displayDialog("Welcome to Dr. Pixel's Research Realm! Use arrow keys to move, 'i' for inventory, and space to interact. Find keys to unlock doors and explore!", "Start Adventure", hideDialog);
        }

        initGame();
    </script>
</body>
</html>